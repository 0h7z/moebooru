<% url = Rails.application.routes.url_helpers %>
$ = jQuery

$ ->
  $('.ac-user-name').autocomplete
    source: '<%= url.ac_user_name_path %>'
    minLength: 2

  $('.ac-tag-name').autocomplete
    source: '<%= url.ac_tag_name_path %>'
    minLength: 2

  editForm = $('#edit-form')[0]
  acTags = $('.ac-tags')[0]

  if editForm? && acTags?
    new TagCompletionBox(acTags)

    if TagCompletion
      TagCompletion.observe_tag_changes_on_submit editForm, acTags
