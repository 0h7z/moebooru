<div id="user-record">
  <h4>Record</h4>

  <table width="100%" class="highlightable" id="history">
    <thead>
      <tr>
        <th></th>
        <th>User</th>
        <th>Reporter</th>
        <th>When</th>
        <th>Body</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% @user_records.each do |rec| %>
        <tr class="<%= cycle 'even', 'odd' %>" id="record-<%= rec.id %>">
          <td style="background: <%= rec.is_positive? ? '#3465a4' : '#cc0000' %>;"><td>
            <% if @user %>
              <%= link_to h(rec.user.pretty_name), :controller => "user", :action => "show", :id => rec.user_id %>
            <% else %>
              <%= link_to h(rec.user.pretty_name), :action => "index", :user_id => rec.user_id %>
            <% end %>
          </td>
          <td><%= h(rec.reporter.pretty_name) %></td>
          <td><%= time_ago_in_words(rec.created_at) %> ago</td>
          <td class="change"><%= format_text(rec.body) %></td>
          <td>
            <% if @current_user.is_mod_or_higher? || @current_user.id == rec.reported_by %>
              <%= link_to_function "Delete", "UserRecord.destroy(#{rec.id})" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div id="paginator">
    <%= will_paginate(@user_records) %>
  </div>

  <%= render :partial => "footer" %>  
</div>
